<!DOCTYPE html>
<html lang="nl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Woningmarkt Analyse Bergweg Rotterdam</title>
    <script crossorigin src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <script src="https://unpkg.com/recharts@2.5.0/dist/Recharts.js"></script>
    <script src="https://cdn.tailwindcss.com"></script>
</head>
<body>
    <div id="root"></div>
    
    <script type="text/babel">
        const { BarChart, Bar, LineChart, Line, ScatterChart, Scatter, XAxis, YAxis, CartesianGrid, Tooltip, Legend, ResponsiveContainer, PieChart, Pie, Cell } = Recharts;

        const BergwegAnalysis = () => {
          const [activeTab, setActiveTab] = React.useState('overview');

          const properties = [
            { address: "Bergweg 365-A03", price: 425000, size: 102, rooms: 2, label: "C", status: "Beschikbaar" },
            { address: "Bergweg 277-B", price: 699000, size: 153, rooms: 4, label: "B", status: "Beschikbaar" },
            { address: "Bergweg 175-C03", price: 450000, size: 81, rooms: 2, label: "E", status: "Beschikbaar" },
            { address: "Bergweg 233-A", price: 500000, size: 149, rooms: 4, label: "C", status: "Beschikbaar" },
            { address: "Bergweg 324-B", price: 585000, size: 153, rooms: 3, label: "E", status: "Beschikbaar" },
            { address: "Bergweg 250-A", price: 650000, size: 133, rooms: 3, label: "A", status: "Beschikbaar" },
            { address: "Bergweg 108-M", price: 525000, size: 75, rooms: 2, label: "A+++", status: "Beschikbaar" },
            { address: "Bergweg 219", price: 2000000, size: 460, rooms: 14, label: "?", status: "Beschikbaar" },
            { address: "Bergweg 99-b", price: 700000, size: 203, rooms: 6, label: "E", status: "Beschikbaar" },
            { address: "Bergweg 239-A", price: 550000, size: 150, rooms: 4, label: "C", status: "Beschikbaar" },
            { address: "Bergweg 253-A", price: 675000, size: 116, rooms: 3, label: "A", status: "Verkocht" },
            { address: "Bergweg 365-A02", price: 419000, size: 93, rooms: 2, label: "B", status: "Verkocht" },
            { address: "Bergweg 143-A", price: 499500, size: 111, rooms: 2, label: "B", status: "Verkocht" },
            { address: "Bergweg 49-D", price: 450000, size: 135, rooms: 3, label: "B", status: "Verkocht" },
            { address: "Bergweg 104-H", price: 360000, size: 50, rooms: 1, label: "A+++", status: "Verkocht" },
            { address: "Bergweg 123-A", price: 650000, size: 146, rooms: 4, label: "B", status: "Verkocht" },
            { address: "Bergweg 262-A", price: 450000, size: 133, rooms: 6, label: "A", status: "Verkocht" },
            { address: "Bergweg 55-D", price: 419000, size: 108, rooms: 3, label: "D", status: "Verkocht" },
            { address: "Bergweg 252", price: 395000, size: 101, rooms: 3, label: "D", status: "Verkocht" },
            { address: "Bergweg 258-B", price: 300000, size: 95, rooms: 3, label: "F", status: "Verkocht" },
            { address: "Bergweg 167-B", price: 675000, size: 154, rooms: 3, label: "D", status: "Verkocht" },
            { address: "Bergweg 114-F", price: 535000, size: 75, rooms: 2, label: "A+++", status: "Verkocht" },
            { address: "Bergweg 104-J", price: 350000, size: 50, rooms: 1, label: "A+++", status: "Verkocht" },
            { address: "Bergweg 61-A", price: 409000, size: 107, rooms: 2, label: "C", status: "Verkocht" },
            { address: "Bergweg 104-T", price: 270000, size: 50, rooms: 1, label: "A++", status: "Verkocht" },
            { address: "Bergweg 112-F", price: 500000, size: 75, rooms: 2, label: "A+++", status: "Verkocht" },
            { address: "Bergweg 310", price: 750000, size: 247, rooms: 6, label: "D", status: "Verkocht" },
            { address: "Bergweg 88-F", price: 325000, size: 75, rooms: 2, label: "A", status: "Onder voorbehoud" },
            { address: "Bergweg 98-B", price: 625000, size: 114, rooms: 4, label: "A", status: "Onder voorbehoud" },
            { address: "Bergweg 307-A", price: 450000, size: 79, rooms: 2, label: "A", status: "Onder bod" },
            { address: "Bergweg 330-C", price: 425000, size: 140, rooms: 3, label: "D", status: "Verkocht" },
            { address: "Bergweg 108-J", price: 340000, size: 50, rooms: 1, label: "A+++", status: "Verkocht" },
            { address: "Bergweg 106-A", price: 495000, size: 71, rooms: 2, label: "A+++", status: "Verkocht" },
            { address: "Bergweg 106-B", price: 450000, size: 68, rooms: 2, label: "A+++", status: "Verkocht" },
            { address: "Bergweg 255-A", price: 550000, size: 117, rooms: 2, label: "B", status: "Verkocht" },
            { address: "Bergweg 236-B", price: 395000, size: 137, rooms: 6, label: "F", status: "Verkocht" },
            { address: "Bergweg 205-A01 (huis)", price: 795000, size: 265, rooms: 4, label: "?", status: "Beschikbaar" },
            { address: "Bergweg 205-A02", price: 392750, size: 69, rooms: 2, label: "A+++", status: "Beschikbaar" },
            { address: "Bergweg 205-A01 (app)", price: 352500, size: 61, rooms: 2, label: "A+++", status: "Beschikbaar" },
            { address: "Bergweg 205-B", price: 699500, size: 128, rooms: 3, label: "A+++", status: "Beschikbaar" },
            { address: "Bergweg 72", price: 672000, size: 96, rooms: 3, label: "A+++", status: "Onder voorbehoud" },
            { address: "Bergweg 53-A", price: 500000, size: 108, rooms: 3, label: "C", status: "Onder voorbehoud" },
            { address: "Bergweg 311-A", price: 329000, size: 67, rooms: 2, label: "B", status: "Onder voorbehoud" },
            { address: "Bergweg 65-A", price: 475000, size: 110, rooms: 3, label: "E", status: "Onder voorbehoud" },
            { address: "Bergweg 116-B", price: 450000, size: 77, rooms: 1, label: "A++", status: "Onder voorbehoud" },
            { address: "Bergweg 253-B", price: 625000, size: 111, rooms: 3, label: "A", status: "Onder bod" },
            { address: "Bergweg 309-B", price: 499500, size: 112, rooms: 3, label: "A", status: "Verkocht" },
            { address: "Bergweg 148-A", price: 350000, size: 66, rooms: 1, label: "A", status: "Verkocht" },
            { address: "Bergweg 153-B", price: 325000, size: 55, rooms: 2, label: "A", status: "Verkocht" },
            { address: "Bergweg 240-A", price: 499500, size: 91, rooms: 2, label: "D", status: "Verkocht" },
            { address: "Bergweg 39-D", price: 385000, size: 115, rooms: 5, label: "D", status: "Verkocht" },
            { address: "Bergweg 155-D", price: 345000, size: 65, rooms: 1, label: "A", status: "Verkocht" },
            { address: "Bergweg 282-C", price: 350000, size: 80, rooms: 2, label: "C", status: "Verkocht" },
            { address: "Bergweg 106-C", price: 360000, size: 50, rooms: 1, label: "A++", status: "Verkocht" },
            { address: "Bergweg 129-a", price: 495000, size: 144, rooms: 3, label: "C", status: "Verkocht" },
            { address: "Bergweg 47-C", price: 280000, size: 61, rooms: 2, label: "E", status: "Verkocht" },
            { address: "Bergweg 236-A", price: 499500, size: 117, rooms: 4, label: "A", status: "Verkocht" },
            { address: "Bergweg 102-B", price: 425000, size: 107, rooms: 3, label: "C", status: "Verkocht" },
            { address: "Bergweg 162-A", price: 600000, size: 142, rooms: 2, label: "A", status: "Verkocht" },
            { address: "Bergweg 55-C", price: 315000, size: 59, rooms: 2, label: "B", status: "Verkocht" }
          ];

          const propertiesWithM2Price = properties
            .filter(p => p.address !== "Bergweg 219")
            .map(p => ({
              ...p,
              pricePerM2: Math.round(p.price / p.size)
            }));

          const avgPricePerM2 = Math.round(
            propertiesWithM2Price.reduce((sum, p) => sum + p.pricePerM2, 0) / propertiesWithM2Price.length
          );
          
          const avgPrice = Math.round(
            propertiesWithM2Price.reduce((sum, p) => sum + p.price, 0) / propertiesWithM2Price.length
          );

          const avgSize = Math.round(
            propertiesWithM2Price.reduce((sum, p) => sum + p.size, 0) / propertiesWithM2Price.length
          );

          const m2PriceRanges = [
            { range: "€3.000-€4.000", count: 0, min: 3000, max: 4000 },
            { range: "€4.000-€5.000", count: 0, min: 4000, max: 5000 },
            { range: "€5.000-€6.000", count: 0, min: 5000, max: 6000 },
            { range: "€6.000-€7.000", count: 0, min: 6000, max: 7000 },
            { range: "€7.000+", count: 0, min: 7000, max: 10000 }
          ];

          propertiesWithM2Price.forEach(p => {
            const range = m2PriceRanges.find(r => p.pricePerM2 >= r.min && p.pricePerM2 < r.max);
            if (range) range.count++;
          });

          const statusData = [
            { name: 'Verkocht', value: properties.filter(p => p.status === 'Verkocht').length },
            { name: 'Beschikbaar', value: properties.filter(p => p.status === 'Beschikbaar').length },
            { name: 'Onder voorbehoud', value: properties.filter(p => p.status === 'Onder voorbehoud').length },
            { name: 'Onder bod', value: properties.filter(p => p.status === 'Onder bod').length }
          ];

          const labelCount = {};
          propertiesWithM2Price.forEach(p => {
            if (p.label && p.label !== '?') {
              labelCount[p.label] = (labelCount[p.label] || 0) + 1;
            }
          });
          
          const labelData = Object.entries(labelCount)
            .map(([label, count]) => ({ label, count }))
            .sort((a, b) => b.count - a.count);

          const sizeCategories = [
            { category: "< 70 m²", count: 0, min: 0, max: 70 },
            { category: "70-100 m²", count: 0, min: 70, max: 100 },
            { category: "100-130 m²", count: 0, min: 100, max: 130 },
            { category: "130-160 m²", count: 0, min: 130, max: 160 },
            { category: "> 160 m²", count: 0, min: 160, max: 500 }
          ];

          propertiesWithM2Price.forEach(p => {
            const cat = sizeCategories.find(c => p.size >= c.min && p.size < c.max);
            if (cat) cat.count++;
          });

          const COLORS = ['#0088FE', '#00C49F', '#FFBB28', '#FF8042', '#8884d8'];

          return (
            <div className="w-full max-w-7xl mx-auto p-6 bg-gray-50">
              <div className="bg-white rounded-lg shadow-lg p-6 mb-6">
                <h1 className="text-3xl font-bold text-gray-800 mb-2">Woningmarkt Analyse: Bergweg, Rotterdam</h1>
                <p className="text-gray-600">Analyse van {properties.length} woningen op de Bergweg</p>
              </div>

              <div className="grid grid-cols-1 md:grid-cols-4 gap-4 mb-6">
                <div className="bg-white rounded-lg shadow p-6">
                  <div className="text-sm text-gray-600 mb-1">Gemiddelde prijs/m²</div>
                  <div className="text-2xl font-bold text-blue-600">€{avgPricePerM2.toLocaleString()}</div>
                </div>
                <div className="bg-white rounded-lg shadow p-6">
                  <div className="text-sm text-gray-600 mb-1">Gemiddelde vraagprijs</div>
                  <div className="text-2xl font-bold text-green-600">€{avgPrice.toLocaleString()}</div>
                </div>
                <div className="bg-white rounded-lg shadow p-6">
                  <div className="text-sm text-gray-600 mb-1">Gemiddelde oppervlakte</div>
                  <div className="text-2xl font-bold text-purple-600">{avgSize} m²</div>
                </div>
                <div className="bg-white rounded-lg shadow p-6">
                  <div className="text-sm text-gray-600 mb-1">Totaal woningen</div>
                  <div className="text-2xl font-bold text-orange-600">{properties.length}</div>
                </div>
              </div>

              <div className="bg-white rounded-lg shadow-lg mb-6">
                <div className="flex border-b">
                  <button
                    onClick={() => setActiveTab('overview')}
                    className={`px-6 py-3 font-medium ${activeTab === 'overview' ? 'border-b-2 border-blue-500 text-blue-600' : 'text-gray-600'}`}
                  >
                    Overzicht
                  </button>
                  <button
                    onClick={() => setActiveTab('prices')}
                    className={`px-6 py-3 font-medium ${activeTab === 'prices' ? 'border-b-2 border-blue-500 text-blue-600' : 'text-gray-600'}`}
                  >
                    Prijzen
                  </button>
                  <button
                    onClick={() => setActiveTab('details')}
                    className={`px-6 py-3 font-medium ${activeTab === 'details' ? 'border-b-2 border-blue-500 text-blue-600' : 'text-gray-600'}`}
                  >
                    Details
                  </button>
                </div>

                <div className="p-6">
                  {activeTab === 'overview' && (
                    <div className="space-y-6">
                      <div className="grid grid-cols-1 lg:grid-cols-2 gap-6">
                        <div>
                          <h3 className="text-lg font-semibold mb-4">Prijs per m² verdeling</h3>
                          <ResponsiveContainer width="100%" height={300}>
                            <BarChart data={m2PriceRanges}>
                              <CartesianGrid strokeDasharray="3 3" />
                              <XAxis dataKey="range" angle={-45} textAnchor="end" height={80} />
                              <YAxis />
                              <Tooltip />
                              <Bar dataKey="count" fill="#0088FE" />
                            </BarChart>
                          </ResponsiveContainer>
                        </div>

                        <div>
                          <h3 className="text-lg font-semibold mb-4">Status verdeling</h3>
                          <ResponsiveContainer width="100%" height={300}>
                            <PieChart>
                              <Pie
                                data={statusData}
                                cx="50%"
                                cy="50%"
                                labelLine={false}
                                label={({ name, value }) => `${name}: ${value}`}
                                outerRadius={80}
                                fill="#8884d8"
                                dataKey="value"
                              >
                                {statusData.map((entry, index) => (
                                  <Cell key={`cell-${index}`} fill={COLORS[index % COLORS.length]} />
                                ))}
                              </Pie>
                              <Tooltip />
                            </PieChart>
                          </ResponsiveContainer>
                        </div>
                      </div>

                      <div className="grid grid-cols-1 lg:grid-cols-2 gap-6">
                        <div>
                          <h3 className="text-lg font-semibold mb-4">Energielabels</h3>
                          <ResponsiveContainer width="100%" height={300}>
                            <BarChart data={labelData}>
                              <CartesianGrid strokeDasharray="3 3" />
                              <XAxis dataKey="label" />
                              <YAxis />
                              <Tooltip />
                              <Bar dataKey="count" fill="#00C49F" />
                            </BarChart>
                          </ResponsiveContainer>
                        </div>

                        <div>
                          <h3 className="text-lg font-semibold mb-4">Grootte categorieën</h3>
                          <ResponsiveContainer width="100%" height={300}>
                            <BarChart data={sizeCategories}>
                              <CartesianGrid strokeDasharray="3 3" />
                              <XAxis dataKey="category" />
                              <YAxis />
                              <Tooltip />
                              <Bar dataKey="count" fill="#FFBB28" />
                            </BarChart>
                          </ResponsiveContainer>
                        </div>
                      </div>
                    </div>
                  )}

                  {activeTab === 'prices' && (
                    <div className="space-y-6">
                      <div>
                        <h3 className="text-lg font-semibold mb-4">Prijs vs. Oppervlakte</h3>
                        <ResponsiveContainer width="100%" height={400}>
                          <ScatterChart>
                            <CartesianGrid strokeDasharray="3 3" />
                            <XAxis dataKey="size" name="Oppervlakte" unit=" m²" />
                            <YAxis dataKey="price" name="Prijs" tickFormatter={(value) => `€${(value/1000).toFixed(0)}k`} />
                            <Tooltip 
                              formatter={(value, name) => {
                                if (name === 'Prijs') return `€${value.toLocaleString()}`;
                                return value;
                              }}
                              labelFormatter={(value) => `${value} m²`}
                            />
                            <Legend />
                            <Scatter name="Woningen" data={propertiesWithM2Price} fill="#8884d8" />
                          </ScatterChart>
                        </ResponsiveContainer>
                      </div>

                      <div>
                        <h3 className="text-lg font-semibold mb-4">Prijs per m² per woning (top 20)</h3>
                        <ResponsiveContainer width="100%" height={400}>
                          <BarChart 
                            data={[...propertiesWithM2Price]
                              .sort((a, b) => b.pricePerM2 - a.pricePerM2)
                              .slice(0, 20)}
                          >
                            <CartesianGrid strokeDasharray="3 3" />
                            <XAxis dataKey="address" angle={-90} textAnchor="end" height={150} interval={0} tick={{ fontSize: 10 }} />
                            <YAxis tickFormatter={(value) => `€${(value/1000).toFixed(1)}k`} />
                            <Tooltip formatter={(value) => `€${value.toLocaleString()}/m²`} />
                            <Bar dataKey="pricePerM2" fill="#FF8042" />
                          </BarChart>
                        </ResponsiveContainer>
                      </div>
                    </div>
                  )}

                  {activeTab === 'details' && (
                    <div className="space-y-4">
                      <h3 className="text-lg font-semibold mb-4">Detailoverzicht alle woningen</h3>
                      <div className="overflow-x-auto">
                        <table className="min-w-full divide-y divide-gray-200">
                          <thead className="bg-gray-50">
                            <tr>
                              <th className="px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase">Adres</th>
                              <th className="px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase">Prijs</th>
                              <th className="px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase">m²</th>
                              <th className="px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase">€/m²</th>
                              <th className="px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase">Kamers</th>
                              <th className="px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase">Label</th>
                              <th className="px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase">Status</th>
                            </tr>
                          </thead>
                          <tbody className="bg-white divide-y divide-gray-200">
                            {propertiesWithM2Price
                              .sort((a, b) => b.pricePerM2 - a.pricePerM2)
                              .map((prop, idx) => (
                              <tr key={idx} className="hover:bg-gray-50">
                                <td className="px-4 py-3 text-sm text-gray-900">{prop.address}</td>
                                <td className="px-4 py-3 text-sm text-gray-900">€{prop.price.toLocaleString()}</td>
                                <td className="px-4 py-3 text-sm text-gray-900">{prop.size}</td>
                                <td className="px-4 py-3 text-sm font-semibold text-blue-600">€{prop.pricePerM2.toLocaleString()}</td>
                                <td className="px-4 py-3 text-sm text-gray-900">{prop.rooms}</td>
                                <td className="px-4 py-3 text-sm text-gray-900">{prop.label}</td>
                                <td className="px-4 py-3 text-sm">
                                  <span className={`px-2 py-1 rounded-full text-xs ${
                                    prop.status === 'Verkocht' ? 'bg-red-100 text-red-800' :
                                    prop.status === 'Beschikbaar' ? 'bg-green-100 text-green-800' :
                                    'bg-yellow-100 text-yellow-800'
                                  }`}>
                                    {prop.status}
                                  </span>
                                </td>
                              </tr>
                            ))}
                          </tbody>
                        </table>
                      </div>
                    </div>
                  )}
                </div>
              </div>

              <div className="bg-white rounded-lg shadow-lg p-6">
                <h3 className="text-lg font-semibold mb-4">Belangrijkste inzichten</h3>
                <ul className="space-y-2 text-gray-700">
                  <li className="flex items-start">
                    <span className="text-blue-500 mr-2">•</span>
                    <span>De gemiddelde prijs per m² op de Bergweg is <strong>€{avgPricePerM2.toLocaleString()}</strong></span>
                  </li>
                  <li className="flex items-start">
                    <span className="text-blue-500 mr-2">•</span>
                    <span>Van de {properties.length} woningen zijn er {statusData[0].value} verkocht ({Math.round(statusData[0].value/properties.length*100)}%)</span>
                  </li>
                  <li className="flex items-start">
                    <span className="text-blue-500 mr-2">•</span>
                    <span>De hoogste prijs per m² is €{Math.max(...propertiesWithM2Price.map(p => p.pricePerM2)).toLocaleString()}</span>
                  </li>
                  <li className="flex items-start">
                    <span className="text-blue-500 mr-2">•</span>
                    <span>De laagste prijs per m² is €{Math.min(...propertiesWithM2Price.map(p => p.pricePerM2)).toLocaleString()}</span>
                  </li>
                  <li className="flex items-start">
                    <span className="text-blue-500 mr-2">•</span>
                    <span>Woningen met energielabel A of hoger: {properties.filter(p => p.label.startsWith('A')).length} van {properties.length} ({Math.round(properties.filter(p => p.label.startsWith('A')).length/properties.length*100)}%)</span>
                  </li>
                </ul>
              </div>
            </div>
          );
        };

        ReactDOM.render(<BergwegAnalysis />, document.getElementById('root'));
    </script>
</body>
</html>