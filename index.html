<!DOCTYPE html>
<html lang="nl">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Woningmarkt Analyse Bergweg Rotterdam</title>

    <!-- React UMD -->
    <script crossorigin src="https://unpkg.com/react@18/umd/react.development.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>

    <!-- Recharts UMD -->
    <script src="https://unpkg.com/recharts/umd/Recharts.min.js"></script>

    <!-- Tailwind -->
    <script src="https://cdn.tailwindcss.com"></script>
</head>

<body class="bg-gray-100">
    <div id="root"></div>

    <script>
      
        // IMPORTANT: FIX — use window.Recharts (not Recharts)
        const {
            BarChart, Bar, ScatterChart, Scatter,
            XAxis, YAxis, CartesianGrid, Tooltip, Legend,
            ResponsiveContainer, PieChart, Pie, Cell
        } = window.Recharts;

        function BergwegAnalysis() {
            const [activeTab, setActiveTab] = React.useState("overview");


          const properties = [
            { address: "Bergweg 365-A03", price: 425000, size: 102, rooms: 2, label: "C", status: "Beschikbaar" },
            { address: "Bergweg 277-B", price: 699000, size: 153, rooms: 4, label: "B", status: "Beschikbaar" },
            { address: "Bergweg 175-C03", price: 450000, size: 81, rooms: 2, label: "E", status: "Beschikbaar" },
            { address: "Bergweg 233-A", price: 500000, size: 149, rooms: 4, label: "C", status: "Beschikbaar" },
            { address: "Bergweg 324-B", price: 585000, size: 153, rooms: 3, label: "E", status: "Beschikbaar" },
            { address: "Bergweg 250-A", price: 650000, size: 133, rooms: 3, label: "A", status: "Beschikbaar" },
            { address: "Bergweg 108-M", price: 525000, size: 75, rooms: 2, label: "A+++", status: "Beschikbaar" },
            { address: "Bergweg 219", price: 2000000, size: 460, rooms: 14, label: "?", status: "Beschikbaar" },
            { address: "Bergweg 99-b", price: 700000, size: 203, rooms: 6, label: "E", status: "Beschikbaar" },
            { address: "Bergweg 239-A", price: 550000, size: 150, rooms: 4, label: "C", status: "Beschikbaar" },
            { address: "Bergweg 253-A", price: 675000, size: 116, rooms: 3, label: "A", status: "Verkocht" },
            { address: "Bergweg 365-A02", price: 419000, size: 93, rooms: 2, label: "B", status: "Verkocht" },
            { address: "Bergweg 143-A", price: 499500, size: 111, rooms: 2, label: "B", status: "Verkocht" },
            { address: "Bergweg 49-D", price: 450000, size: 135, rooms: 3, label: "B", status: "Verkocht" },
            { address: "Bergweg 104-H", price: 360000, size: 50, rooms: 1, label: "A+++", status: "Verkocht" },
            { address: "Bergweg 123-A", price: 650000, size: 146, rooms: 4, label: "B", status: "Verkocht" },
            { address: "Bergweg 262-A", price: 450000, size: 133, rooms: 6, label: "A", status: "Verkocht" },
            { address: "Bergweg 55-D", price: 419000, size: 108, rooms: 3, label: "D", status: "Verkocht" },
            { address: "Bergweg 252", price: 395000, size: 101, rooms: 3, label: "D", status: "Verkocht" },
            { address: "Bergweg 258-B", price: 300000, size: 95, rooms: 3, label: "F", status: "Verkocht" },
            { address: "Bergweg 167-B", price: 675000, size: 154, rooms: 3, label: "D", status: "Verkocht" },
            { address: "Bergweg 114-F", price: 535000, size: 75, rooms: 2, label: "A+++", status: "Verkocht" },
            { address: "Bergweg 104-J", price: 350000, size: 50, rooms: 1, label: "A+++", status: "Verkocht" },
            { address: "Bergweg 61-A", price: 409000, size: 107, rooms: 2, label: "C", status: "Verkocht" },
            { address: "Bergweg 104-T", price: 270000, size: 50, rooms: 1, label: "A++", status: "Verkocht" },
            { address: "Bergweg 112-F", price: 500000, size: 75, rooms: 2, label: "A+++", status: "Verkocht" },
            { address: "Bergweg 310", price: 750000, size: 247, rooms: 6, label: "D", status: "Verkocht" },
            { address: "Bergweg 88-F", price: 325000, size: 75, rooms: 2, label: "A", status: "Onder voorbehoud" },
            { address: "Bergweg 98-B", price: 625000, size: 114, rooms: 4, label: "A", status: "Onder voorbehoud" },
            { address: "Bergweg 307-A", price: 450000, size: 79, rooms: 2, label: "A", status: "Onder bod" },
            { address: "Bergweg 330-C", price: 425000, size: 140, rooms: 3, label: "D", status: "Verkocht" },
            { address: "Bergweg 108-J", price: 340000, size: 50, rooms: 1, label: "A+++", status: "Verkocht" },
            { address: "Bergweg 106-A", price: 495000, size: 71, rooms: 2, label: "A+++", status: "Verkocht" },
            { address: "Bergweg 106-B", price: 450000, size: 68, rooms: 2, label: "A+++", status: "Verkocht" },
            { address: "Bergweg 255-A", price: 550000, size: 117, rooms: 2, label: "B", status: "Verkocht" },
            { address: "Bergweg 236-B", price: 395000, size: 137, rooms: 6, label: "F", status: "Verkocht" },
            { address: "Bergweg 205-A01 (huis)", price: 795000, size: 265, rooms: 4, label: "?", status: "Beschikbaar" },
            { address: "Bergweg 205-A02", price: 392750, size: 69, rooms: 2, label: "A+++", status: "Beschikbaar" },
            { address: "Bergweg 205-A01 (app)", price: 352500, size: 61, rooms: 2, label: "A+++", status: "Beschikbaar" },
            { address: "Bergweg 205-B", price: 699500, size: 128, rooms: 3, label: "A+++", status: "Beschikbaar" },
            { address: "Bergweg 72", price: 672000, size: 96, rooms: 3, label: "A+++", status: "Onder voorbehoud" },
            { address: "Bergweg 53-A", price: 500000, size: 108, rooms: 3, label: "C", status: "Onder voorbehoud" },
            { address: "Bergweg 311-A", price: 329000, size: 67, rooms: 2, label: "B", status: "Onder voorbehoud" },
            { address: "Bergweg 65-A", price: 475000, size: 110, rooms: 3, label: "E", status: "Onder voorbehoud" },
            { address: "Bergweg 116-B", price: 450000, size: 77, rooms: 1, label: "A++", status: "Onder voorbehoud" },
            { address: "Bergweg 253-B", price: 625000, size: 111, rooms: 3, label: "A", status: "Onder bod" },
            { address: "Bergweg 309-B", price: 499500, size: 112, rooms: 3, label: "A", status: "Verkocht" },
            { address: "Bergweg 148-A", price: 350000, size: 66, rooms: 1, label: "A", status: "Verkocht" },
            { address: "Bergweg 153-B", price: 325000, size: 55, rooms: 2, label: "A", status: "Verkocht" },
            { address: "Bergweg 240-A", price: 499500, size: 91, rooms: 2, label: "D", status: "Verkocht" },
            { address: "Bergweg 39-D", price: 385000, size: 115, rooms: 5, label: "D", status: "Verkocht" },
            { address: "Bergweg 155-D", price: 345000, size: 65, rooms: 1, label: "A", status: "Verkocht" },
            { address: "Bergweg 282-C", price: 350000, size: 80, rooms: 2, label: "C", status: "Verkocht" },
            { address: "Bergweg 106-C", price: 360000, size: 50, rooms: 1, label: "A++", status: "Verkocht" },
            { address: "Bergweg 129-a", price: 495000, size: 144, rooms: 3, label: "C", status: "Verkocht" },
            { address: "Bergweg 47-C", price: 280000, size: 61, rooms: 2, label: "E", status: "Verkocht" },
            { address: "Bergweg 236-A", price: 499500, size: 117, rooms: 4, label: "A", status: "Verkocht" },
            { address: "Bergweg 102-B", price: 425000, size: 107, rooms: 3, label: "C", status: "Verkocht" },
            { address: "Bergweg 162-A", price: 600000, size: 142, rooms: 2, label: "A", status: "Verkocht" },
            { address: "Bergweg 55-C", price: 315000, size: 59, rooms: 2, label: "B", status: "Verkocht" }
          ];

                      // Filtering + prijs/m² berekening
                      const filtered = properties
                .filter(p => p.price < 1000000)
                .map(p => ({
                    ...p,
                    pricePerM2: Math.round(p.price / p.size)
                }));

            const avgPricePerM2 = Math.round(
                filtered.reduce((sum, p) => sum + p.pricePerM2, 0) / filtered.length
            );

            const avgSize = Math.round(
                filtered.reduce((sum, p) => sum + p.size, 0) / filtered.length
            );

            const avgPrice = Math.round(
                filtered.reduce((sum, p) => sum + p.price, 0) / filtered.length
            );

            const m2ranges = [
                { range: "€3.000 - €4.500", min: 3000, max: 4500, count: 0 },
                { range: "€4.500 - €5.500", min: 4500, max: 5500, count: 0 },
                { range: "€5.500 - €6.500", min: 5500, max: 6500, count: 0 },
                { range: "€6.500 - €7.500", min: 6500, max: 7500, count: 0 },
                { range: "> 7500", min: 7500, max: 20000, count: 0 },
            ];

            filtered.forEach(p => {
                const r = m2ranges.find(x => p.pricePerM2 >= x.min && p.pricePerM2 < x.max);
                if (r) r.count++;
            });

            return React.createElement("div", { className: "max-w-6xl mx-auto p-6" }, [

                // Titel
                React.createElement("div", { className: "bg-white shadow p-6 rounded mb-6" }, [
                    React.createElement("h1", { className: "text-3xl font-bold mb-2" }, "Analyse Bergweg, Rotterdam"),
                    React.createElement("p", { className: "text-gray-600" }, "Volledige woningmarkt analyse op basis van Funda-data.")
                ]),

                // KPIs
                React.createElement("div", { className: "grid grid-cols-1 md:grid-cols-3 gap-4 mb-6" }, [
                    metric("Gemiddelde prijs/m²", "€" + avgPricePerM2.toLocaleString(), "text-blue-600"),
                    metric("Gemiddelde vraagprijs", "€" + avgPrice.toLocaleString(), "text-green-600"),
                    metric("Gemiddelde oppervlakte", avgSize + " m²", "text-purple-600"),
                ]),

                // Tabs
                React.createElement("div", { className: "flex gap-4 mb-6" }, [
                    tabButton("overview", activeTab, setActiveTab, "Overzicht"),
                    tabButton("distribution", activeTab, setActiveTab, "Prijs Distributie"),
                    tabButton("scatter", activeTab, setActiveTab, "Prijs vs m²"),
                    tabButton("details", activeTab, setActiveTab, "Details"),
                ]),

                // CONTENT SWITCH
                activeTab === "overview" && overviewSection(m2ranges),
                activeTab === "distribution" && distributionSection(m2ranges),
                activeTab === "scatter" && scatterSection(filtered),
                activeTab === "details" && detailsSection(filtered)

            ]);
        }

        // ---- UI HELPERS ----
        function metric(label, value, color) {
            return React.createElement("div", { className: "bg-white p-6 shadow rounded" }, [
                React.createElement("div", { className: "text-sm text-gray-600" }, label),
                React.createElement("div", { className: "text-2xl font-bold " + color }, value)
            ]);
        }

        function tabButton(id, activeTab, setActiveTab, label) {
            return React.createElement("button", {
                onClick: () => setActiveTab(id),
                className:
                    "px-4 py-2 rounded " +
                    (activeTab === id
                        ? "bg-blue-600 text-white"
                        : "bg-gray-200 text-gray-700")
            }, label);
        }

        // ---- SECTIONS ----

        function overviewSection(m2ranges) {
            return React.createElement("div", null, [
                React.createElement("h2", { className: "text-xl font-semibold mb-4" }, "Prijs/m² verdeling"),

                React.createElement("div", { className: "bg-white p-4 shadow rounded" },
                    React.createElement(ResponsiveContainer, { width: "100%", height: 300 },
                        React.createElement(BarChart, { data: m2ranges }, [
                            React.createElement(CartesianGrid, { strokeDasharray: "3 3" }),
                            React.createElement(XAxis, { dataKey: "range" }),
                            React.createElement(YAxis, null),
                            React.createElement(Tooltip, null),
                            React.createElement(Bar, { dataKey: "count", fill: "#3b82f6" })
                        ])
                    )
                )
            ]);
        }

        function distributionSection(m2ranges) {
            return overviewSection(m2ranges);
        }

        function scatterSection(filtered) {
            return React.createElement("div", null, [

                React.createElement("h2", { className: "text-xl font-semibold mb-4" }, "Prijs vs Woonoppervlakte"),

                React.createElement("div", { className: "bg-white p-4 shadow rounded" },
                    React.createElement(ResponsiveContainer, { width: "100%", height: 350 },
                        React.createElement(ScatterChart, null, [
                            React.createElement(CartesianGrid, null),
                            React.createElement(XAxis, { dataKey: "size", name: "m²", unit: "m²" }),
                            React.createElement(YAxis, { dataKey: "price", name: "Prijs", unit: "€" }),
                            React.createElement(Tooltip, null),
                            React.createElement(Scatter, { data: filtered, fill: "#f59e0b" })
                        ])
                    )
                )
            ]);
        }

        function detailsSection(filtered) {
            return React.createElement("div", null, [

                React.createElement("h2", { className: "text-xl font-semibold mb-4" }, "Alle woningen"),

                React.createElement("div", { className: "overflow-x-auto" },
                    React.createElement("table", { className: "min-w-full bg-white shadow rounded" }, [

                        React.createElement("thead", { className: "bg-gray-100" },
                            React.createElement("tr", null, [
                                th("Adres"), th("Prijs"), th("m²"), th("€/m²"), th("Kamers"), th("Label"), th("Status")
                            ])
                        ),

                        React.createElement("tbody", null,
                            filtered.map((p, i) =>
                                React.createElement("tr", { key: i, className: "border-b hover:bg-gray-50" }, [
                                    td(p.address),
                                    td("€" + p.price.toLocaleString()),
                                    td(p.size),
                                    td("€" + p.pricePerM2),
                                    td(p.rooms),
                                    td(p.label),
                                    td(p.status),
                                ])
                            )
                        )

                    ])
                )
            ]);
        }

        function th(label) {
            return React.createElement("th",
                { className: "px-4 py-2 text-left text-xs font-semibold text-gray-600 uppercase" },
                label
            );
        }

        function td(content) {
            return React.createElement("td",
                { className: "px-4 py-2 text-sm text-gray-800" },
                content
            );
        }

        // ---- Mount Component ----
        const root = ReactDOM.createRoot(document.getElementById("root"));
        root.render(React.createElement(BergwegAnalysis));
    </script>

</body>
</html>